---
apiVersion: keycloak.org/v1alpha1
kind: KeycloakRealm
metadata:
  name: my-keycloak-realm
  labels:
    app: keycloak
spec:
  instanceSelector:
    matchLabels:
      app: keycloak
  realm:
    id: example
    realm: example
    displayName: Example
    enabled: true
    userFederationProviders:
      - displayName: "ldap"
        providerName: "ldap"
        config:
          vendor: "other"
          connectionUrl: "ldap://my-ldap-service.ldap.svc.cluster.local"
          bindDn: "cn=admin,dc=example,dc=com"
          bindCredential: "${vault.bindCredential}"
          usersDn: "DC=example,DC=com"
          usernameLDAPAttribute: "uid"
          rdnLDAPAttribute: "uid"
          uuidLDAPAttribute: "entryUUID"
          userObjectClasses: "inetOrgPerson,organizationalPerson"
          searchScope: "2"
          importEnabled: "true"
          useTruststoreSpi: "ldapsOnly"
          trustEmail: "false"
