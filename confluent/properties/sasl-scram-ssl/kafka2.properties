######################################################################
### Server Basics
######################################################################

broker.id=2
# broker.rack=

######################################################################
### Listeners
######################################################################

listeners=INTERNAL://:9091,EXTERNAL://:9092,REPLICATION://:9093
advertised.listeners=INTERNAL://kafka2:9091,EXTERNAL://kafka2:9092,REPLICATION://kafka2:9093
listener.security.protocol.map=INTERNAL:SASL_SSL,EXTERNAL:SASL_SSL,REPLICATION:SASL_SSL
inter.broker.listener.name=REPLICATION

# listeners=INTERNAL://:9091,EXTERNAL://:9092,REPLICATION://:9093,TEMP://:9095
# advertised.listeners=INTERNAL://kafka2:9091,EXTERNAL://kafka2:9092,REPLICATION://kafka2:9093,TEMP://kafka2:9095
# listener.security.protocol.map=INTERNAL:SASL_SSL,EXTERNAL:SASL_SSL,REPLICATION:SASL_SSL,TEMP:PLAINTEXT
# inter.broker.listener.name=TEMP

security.protocol=SASL_SSL
# security.inter.broker.protocol=SSL
sasl.mechanism.inter.broker.protocol=SCRAM-SHA-256
sasl.mechanism=SCRAM-SHA-256
sasl.enabled.mechanisms=SCRAM-SHA-256
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="kafkaadmin" \
    password="kafkaadmin" \
    user_kafkaadmin="kafkaadmin" \
    user_kafka="kafka-secret";
ssl.protocol=TLSv1.2
ssl.enabled.protocols=TLSv1.2
ssl.key.password=mystorepassword
ssl.keystore.location=/usr/local/confluent/ssl/kafka-keystore.jks
ssl.keystore.password=mystorepassword
ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
ssl.truststore.password=mystorepassword

listener.name.internal.sasl.mechanism=SCRAM-SHA-256
listener.name.internal.sasl.enabled.mechanisms=SCRAM-SHA-256
listener.name.internal.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="kafkaadmin" \
    password="kafkaadmin" \
    user_kafkaadmin="kafkaadmin" \
    user_kafka="kafka-secret" \
    user_sr="sr-secret" \
    user_connect="connect-secret" \
    user_erp="erp-secret" \
    user_c3="c3-secret";
listener.name.internal.ssl.protocol=TLSv1.2
listener.name.internal.ssl.enabled.protocols=TLSv1.2
listener.name.internal.ssl.key.password=mystorepassword
listener.name.internal.ssl.keystore.location=/usr/local/confluent/ssl/kafka-keystore.jks
listener.name.internal.ssl.keystore.password=mystorepassword
listener.name.internal.ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
listener.name.internal.ssl.truststore.password=mystorepassword

listener.name.external.sasl.mechanism=SCRAM-SHA-256
listener.name.external.sasl.enabled.mechanisms=SCRAM-SHA-256
listener.name.external.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="kafkaadmin" \
    password="kafkaadmin" \
    user_kafkaadmin="kafkaadmin" \
    user_kafka="kafka-secret";
listener.name.external.ssl.protocol=TLSv1.2
listener.name.external.ssl.enabled.protocols=TLSv1.2
listener.name.external.ssl.key.password=mystorepassword
listener.name.external.ssl.keystore.location=/usr/local/confluent/ssl/kafka-keystore.jks
listener.name.external.ssl.keystore.password=mystorepassword
listener.name.external.ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
listener.name.external.ssl.truststore.password=mystorepassword

listener.name.replication.sasl.mechanism=SCRAM-SHA-256
listener.name.replication.sasl.enabled.mechanisms=SCRAM-SHA-256
listener.name.replication.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="kafkaadmin" \
    password="kafkaadmin" \
    user_kafkaadmin="kafkaadmin" \
    user_kafka="kafka-secret";
listener.name.replication.ssl.protocol=TLSv1.2
listener.name.replication.ssl.enabled.protocols=TLSv1.2
listener.name.replication.ssl.key.password=mystorepassword
listener.name.replication.ssl.keystore.location=/usr/local/confluent/ssl/kafka-keystore.jks
listener.name.replication.ssl.keystore.password=mystorepassword
listener.name.replication.ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
listener.name.replication.ssl.truststore.password=mystorepassword

######################################################################
### Confluent Metrics Reporter
######################################################################

metric.reporters=io.confluent.metrics.reporter.ConfluentMetricsReporter
confluent.metrics.reporter.bootstrap.servers=kafka1:9091,kafka2:9091,kafka3:9091
# confluent.metrics.reporter.bootstrap.servers=kafka1:9095,kafka2:9095,kafka3:9095

confluent.metrics.reporter.security.protocol=SASL_SSL
confluent.metrics.reporter.sasl.mechanism=SCRAM-SHA-256
confluent.metrics.reporter.sasl.enabled.mechanisms=SCRAM-SHA-256
confluent.metrics.reporter.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="kafkaadmin" \
    password="kafkaadmin" \
    user_kafkaadmin="kafkaadmin" \
    user_kafka="kafka-secret";
confluent.metrics.reporter.ssl.protocol=TLSv1.2
confluent.metrics.reporter.ssl.enabled.protocols=TLSv1.2
confluent.metrics.reporter.ssl.key.password=mystorepassword
confluent.metrics.reporter.ssl.keystore.location=/usr/local/confluent/ssl/kafka-keystore.jks
confluent.metrics.reporter.ssl.keystore.password=mystorepassword
confluent.metrics.reporter.ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
confluent.metrics.reporter.ssl.truststore.password=mystorepassword

confluent.metrics.reporter.topic.replicas=3

######################################################################
### Confluent Authorizer Settings
######################################################################

# authorizer.class.name=io.confluent.kafka.security.authorizer.ConfluentServerAuthorizer
# super.users=
# confluent.license=
# confluent.license.topic.replication.factor=3
# confluent.authorizer.access.rule.providers=ZK_ACL,CONFLUENT
# confluent.metadata.bootstrap.servers=PLAINTEXT://127.0.0.1:9092
# confluent.metadata.topic.replication.factor=3
# confluent.security.event.logger.exporter.kafka.topic.replicas=3
# confluent.metadata.server.listeners=http://0.0.0.0:8090
# confluent.metadata.server.advertised.listeners=http://127.0.0.1:8090

# super.users=User:kafkaadmin
# authorizer.class.name=kafka.security.authorizer.AclAuthorizer
# allow.everyone.if.no.acl.found=true

######################################################################
### Zookeeper
######################################################################

zookeeper.connect=zookeeper1:2182,zookeeper2:2182,zookeeper3:2182/clusterlocal
zookeeper.connection.timeout.ms=18000
zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty
zookeeper.ssl.client.enable=true
zookeeper.ssl.protocol=TLSv1.2
zookeeper.ssl.enabled.protocols=TLSv1.2
zookeeper.ssl.truststore.location=/usr/local/confluent/ssl/kafka-truststore.jks
zookeeper.ssl.truststore.password=mystorepassword

######################################################################
### Socket Server Settings
######################################################################

num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

######################################################################
### Replica Settings
######################################################################

default.replication.factor=3
min.insync.replicas=2
replica.lag.time.max.ms=30000
unclean.leader.election.enable=false

offsets.topic.replication.factor=3
transaction.state.log.replication.factor=3
transaction.state.log.min.isr=2

######################################################################
### Log Basics
######################################################################

log.dirs=/mnt/kafka/data
num.partitions=3
num.recovery.threads.per.data.dir=1
auto.create.topics.enable=true
# auto.create.topics.enable=false
# message.max.bytes=
log.cleanup.policy=delete
# log.cleanup.policy=compact
# log.cleanup.policy=compact,delete

######################################################################
### Log Policy
######################################################################

log.retention.hours=168
# log.retention.minutes=10080
# log.retention.ms=
# log.retention.bytes=1073741824
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000

# log.cleaner.enable=true
# log.cleaner.threads=1

# log.flush.interval.messages=10000
# log.flush.interval.ms=1000

######################################################################
### Confluent Data Balancer Settings
######################################################################

confluent.balancer.enable=true
confluent.balancer.heal.uneven.load.trigger=EMPTY_BROKER
# confluent.balancer.heal.uneven.load.trigger=ANY_UNEVEN_LOAD
confluent.balancer.heal.broker.failure.threshold.ms=3600000
# confluent.balancer.heal.broker.failure.threshold.ms=-1
confluent.balancer.throttle.bytes.per.second=10485760
# confluent.balancer.max.replicas=10000
confluent.balancer.disk.max.load=0.85
# confluent.balancer.network.in.max.bytes.per.second=10485760
# confluent.balancer.network.out.max.bytes.per.second=10485760
confluent.balancer.topic.replication.factor=3
# confluent.balancer.exclude.topic.names=
# confluent.balancer.exclude.topic.prefixes=

######################################################################
### Confluent Telemetry Settings
######################################################################

# confluent.telemetry.enabled=true
# confluent.telemetry.api.key=<CLOUD_API_KEY>
# confluent.telemetry.api.secret=<CCLOUD_API_SECRET>

######################################################################
### Tiered Storage Settings
######################################################################

confluent.tier.enable=false
# confluent.tier.enable=true
# confluent.tier.feature=true
# confluent.tier.backend=S3
# confluent.tier.s3.region=ap-northeast-2
# confluent.tier.s3.bucket=kafka-tiered-storage
# confluent.tier.s3.aws.endpoint.override=
# confluent.tier.s3.cred.file.path=/usr/local/confluent/aws/credentials
# confluent.tier.s3.sse.algorithm=none
# confluent.tier.metadata.replication.factor=3
# confluent.tier.local.hotset.ms=3600000
# confluent.tier.local.hotset.bytes=1073741824
