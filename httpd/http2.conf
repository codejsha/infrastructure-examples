### https://httpd.apache.org/docs/current/howto/http2.html
### https://httpd.apache.org/docs/current/mod/mod_http2.html
### https://httpd.apache.org/docs/current/mod/core.html#protocols
### https://nghttp2.org/documentation/nghttp.1.html
### https://nghttp2.org/documentation/h2load-howto.html

######################################################################

### modules
### libnghttp2 package: yum install -y nghttp2 libnghttp2 libnghttp2-devel
# LoadModule http2_module modules/mod_http2.so

######################################################################

### http2

### HTTP/2 in a VirtualHost context (TLS only)
Protocols h2 http/1.1
### HTTP/2 in a Server context (TLS and cleartext)
Protocols h2 h2c http/1.1

######################################################################

### virtual host

Protocols http/1.1
<VirtualHost *:80>
    ServerName test.example.org
    Protocols h2 http/1.1
</VirtualHost>

######################################################################

### reverse proxy

<VirtualHost *:80>
    DocumentRoot "/var/www/html"
    ServerName test.example.com
    ErrorLog "logs/test-error_log"
    CustomLog "logs/test-access_log" combined

    ### HTTP/2 (TLS)
    ProxyPass "/app1" "h2://app1.example.com"
    ProxyPassReverse "/app1" "https://app1.example.com"

    ### HTTP/2 (cleartext)
    ProxyPass "/app2" "h2c://app2.example.com"
    ProxyPassReverse "/app2" "http://app2.example.com"
</VirtualHost>

######################################################################

### test
# nghttp - useful to visualize the HTTP/2 frames and get a better idea of the protocol
# h2load - useful to stress-test your server
