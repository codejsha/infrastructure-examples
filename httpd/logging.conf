### https://httpd.apache.org/docs/current/logs.html
### https://httpd.apache.org/docs/current/programs/rotatelogs.html
### https://httpd.apache.org/docs/current/mod/mod_log_config.html

######################################################################

### error log
LogLevel info

######################################################################

### access log

### common log format
LogFormat "%h %l %u %t \"%r\" %>s %b" common
CustomLog logs/access_log common

### combined log format
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" combined
CustomLog log/access_log combined

### conditional logs
SetEnvIf Remote_Addr "127\.0\.0\.1" dontlog
SetEnvIf Request_URI "^/robots\.txt$" dontlog
CustomLog logs/access_log common env=!dontlog

SetEnv CACHE_MISS 1
LogFormat "%h %l %u %t "%r " %>s %b %{CACHE_MISS}e" common-cache
CustomLog logs/access_log common-cache

LogFormat "%400,501{User-agent}i" browserlog
LogFormat "%!200,304,302{Referer}i" refererlog

######################################################################

### piped log
CustomLog "|/usr/local/httpd/bin/rotatelogs /var/log/httpd/access_log-%Y%m%d.log 86400" common
CustomLog "|bin/rotatelogs /var/log/httpd/access_log-%Y%m%d.log 86400" common
ErrorLog "|bin/rotatelogs /var/log/httpd/error_log-%Y%m%d.log 86400" common
CustomLog "|/usr/sbin/rotatelogs logs/access_log.%Y-%m-%d 86400" common
ErrorLog "|/usr/sbin/rotatelogs logs/error_log.%Y-%m-%d 86400" common

######################################################################

### virtual host log
LogFormat "%v %l %u %t \"%r\" %>s %b" comonvhost
CustomLog logs/access_log comonvhost

######################################################################

### forensic log
LoadModule unique_id_module modules/mod_unique_id.so
LoadModule log_forensic_module modules/mod_log_forensic.so
ForensicLog "logs/forensic_log"
