<!-- ###################################################################### -->

<!-- PostgreSQL Shared Resource-->

<!-- server.xml -->
<GlobalNamingResources>
    <Resource name="jdbc/postgres" auth="Container" type="javax.sql.DataSource"
              username="postgres" password="postgres" driverClassName="org.postgresql.Driver"
              url="jdbc:postgresql://test.example.com:5432/postgres"
              initialSize="30" minIdle="30" maxTotal="30" maxIdle="30" maxWaitMillis="10000"
              testOnBorrow="true" testWhileIdle="true" validationQuery="SELECT 1" validationInterval="100000"
              removeAbandonedOnBorrow="true" removeAbandonedOnMaintenance="true" removeAbandonedTimeout="300" logAbandoned="true"
              jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.StatementCache(prepared=true,max=50)" />
</GlobalNamingResources>

<!-- context.xml -->
<Context>
    <ResourceLink name="jdbc/postgres" global="jdbc/postgres" type="javax.sql.DataSource" />
</Context>

<!-- web.xml -->
<resource-ref>
    <description>PostgreSQL DataSource Example</description>
    <res-ref-name>jdbc/postgres</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>

<!-- ###################################################################### -->

<!-- PostgreSQL Application-specific Resource -->

<!-- context.xml -->
<Context>
    <Resource name="jdbc/postgres" auth="Container" type="javax.sql.DataSource"
              username="postgres" password="postgres" driverClassName="org.postgresql.Driver"
              url="jdbc:postgresql://test.example.com:5432/postgres"
              initialSize="30" minIdle="30" maxTotal="30" maxIdle="30" maxWaitMillis="10000"
              testOnBorrow="true" testWhileIdle="true" validationQuery="SELECT 1" validationInterval="100000"
              removeAbandonedOnBorrow="true" removeAbandonedOnMaintenance="true" removeAbandonedTimeout="300" logAbandoned="true"
              jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.StatementCache(prepared=true,max=50)" />
</Context>

<!-- web.xml -->
<resource-ref>
    <description>PostgreSQL DataSource Example</description>
    <res-ref-name>jdbc/postgres</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>
