{% if schemaRegistry is defined %}
schemaRegistry:
  common:
    {% if schemaRegistry.common.stopScript is defined %}
    stopScript: {{ schemaRegistry.common.stopScript }}
    {% else %}
    stopScript: {{ defaultSchemaRegistryStopScript }}
    {% endif %}
    param:
    {# logDir #}
      logDir: {{ schemaRegistry.common.param.logDir }}
    {# listeners #}
      {% if schemaRegistry.common.param.listeners is defined %}
      listeners: {{ schemaRegistry.common.param.listeners }}
      {% else %}
      listeners: http://0.0.0.0:{{ defaultSchemaRegistryListenPort }}
      {% endif %}
    {# bootstrapServers #}
      {% if schemaRegistry.common.param.bootstrapServers is defined %}
      bootstrapServers: {{ schemaRegistry.common.param.bootstrapServers }}
      {% else %}
      {% if kafka.servers is defined %}
      bootstrapServers: {% for server in kafka.servers -%}
      PLAINTEXT://{{ server.serverName }}:{{ defaultKafkaListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      bootstrapServers:
      {% endif %}
      {% endif %}
      {{ '' }}

  servers:
    {% for server in schemaRegistry.servers %}
    - serverName: {{ server.serverName }}
    {# hostName #}
      {% if server.hostName is defined %}
      hostName: {{ server.hostName }}
      {% else %}
      hostName: {{ server.serverName }}
      {% endif %}
    {# ipAddress #}
      ipAddress: {{ server.ipAddress }}
      paramOverride:
      {# logDir #}
        {% if server.paramOverride is defined and server.paramOverride.logDir is defined %}
        logDir: {{ server.paramOverride.logDir }}
        {% else %}
        # logDir:
        {% endif %}
      {# listeners #}
        {% if server.paramOverride is defined and server.paramOverride.listeners is defined %}
        listeners: {{ server.paramOverride.listeners }}
        {% else %}
        # listeners:
        {% endif %}
      {# bootstrapServers #}
        {% if server.paramOverride is defined and server.paramOverride.bootstrapServers is defined %}
        bootstrapServers: {{ server.paramOverride.bootstrapServers }}
        {% else %}
        # bootstrapServers:
        {% endif %}
    {% include 'file-template.yaml.j2' %}

    {% endfor %}
{% endif %}
