{% if controlCenter is defined %}
controlCenter:
  common:
    {% if controlCenter.common.stopScript is defined %}
    stopScript: {{ controlCenter.common.stopScript }}
    {% else %}
    stopScript: {{ defaultControlCenterStopScript }}
    {% endif %}
    param:
    {# dataDir #}
      dataDir: {{ controlCenter.common.param.dataDir }}
    {# logDir #}
      logDir: {{ controlCenter.common.param.logDir }}
    {# bootstrapServers #}
      {% if controlCenter.common.param.bootstrapServers is defined %}
      bootstrapServers: {{ controlCenter.common.param.bootstrapServers }}
      {% else %}
      {% if kafka.servers is defined %}
      bootstrapServers: {% for server in kafka.servers -%}
      {{ server.serverName }}:{{ defaultKafkaListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      bootstrapServers:
      {% endif %}
      {% endif %}
      {{ '' }}
    {# zookeeperConnect #}
      {% if controlCenter.common.param.zookeeperConnect is defined %}
      zookeeperConnect: {{ controlCenter.common.param.zookeeperConnect }}
      {% else %}
      {% if zookeeper.servers is defined %}
      zookeeperConnect: {% for server in zookeeper.servers -%}
      {{ server.serverName }}:{{ defaultZookeeperClientPort }}
      {%- if not loop.last -%},{% endif %}
      {%- if loop.last -%}{{ defaultZookeeperZNode }}{% endif %}
      {% endfor %}
      {% else %}
      zookeeperConnect:
      {% endif %}
      {% endif %}
      {{ '' }}
    {# schemaRegistryUrl #}
      {% if controlCenter.common.param.schemaRegistryUrl is defined %}
      schemaRegistryUrl: {{ controlCenter.common.param.schemaRegistryUrl }}
      {% else %}
      {% if schemaRegistry.servers is defined %}
      schemaRegistryUrl: {% for server in schemaRegistry.servers -%}
      http://{{ server.serverName }}:{{ defaultSchemaRegistryListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      schemaRegistryUrl:
      {% endif %}
      {% endif %}
      {{ '' }}
    {# kafkaConnectUrl #}
      {% if controlCenter.common.param.kafkaConnectUrl is defined %}
      kafkaConnectUrl: {{ controlCenter.common.param.kafkaConnectUrl }}
      {% else %}
      {% if kafkaConnect.servers is defined %}
      kafkaConnectUrl: {% for server in kafkaConnect.servers -%}
      http://{{ server.serverName }}:{{ defaultKafkaConnectListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      kafkaConnectUrl:
      {% endif %}
      {% endif %}
      {{ '' }}
    {# kafkaRestUrl #}
      {% if controlCenter.common.param.kafkaRestUrl is defined %}
      kafkaRestUrl: {{ controlCenter.common.param.kafkaRestUrl }}
      {% else %}
      {% if kafkaRest.servers is defined %}
      kafkaRestUrl: {% for server in kafkaRest.servers -%}
      http://{{ server.serverName }}:{{ defaultKafkaRestListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      kafkaRestUrl:
      {% endif %}
      {% endif %}
      {{ '' }}
    {# ksqlDbUrl #}
      {% if controlCenter.common.param.ksqlDbUrl is defined %}
      ksqlDbUrl: {{ controlCenter.common.param.ksqlDbUrl }}
      {% else %}
      {% if ksqlDb.servers is defined %}
      ksqlDbUrl: {% for server in ksqlDb.servers -%}
      http://{{ server.serverName }}:{{ defaultKsqlDbListenPort }}{%- if not loop.last -%},{% endif %}
      {% endfor %}
      {% else %}
      ksqlDbUrl:
      {% endif %}
      {% endif %}
      {{ '' }}

  servers:
    {% for server in controlCenter.servers %}
    - serverName: {{ server.serverName }}
    {# hostName #}
      {% if server.hostName is defined %}
      hostName: {{ server.hostName }}
      {% else %}
      hostName: {{ server.serverName }}
      {% endif %}
    {# ipAddress #}
      ipAddress: {{ server.ipAddress }}
    {# serverId #}
      serverId: {{ server.serverId }}
      paramOverride:
      {# dataDir #}
        {% if server.paramOverride is defined and server.paramOverride.dataDir is defined %}
        dataDir: {{ server.paramOverride.dataDir }}
        {% else %}
        # dataDir:
        {% endif %}
      {# logDir #}
        {% if server.paramOverride is defined and server.paramOverride.logDir is defined %}
        logDir: {{ server.paramOverride.logDir }}
        {% else %}
        # logDir:
        {% endif %}
      {# bootstrapServers #}
        {% if server.paramOverride is defined and server.paramOverride.bootstrapServers is defined %}
        bootstrapServers: {{ server.paramOverride.bootstrapServers }}
        {% else %}
        # bootstrapServers:
        {% endif %}
      {# zookeeperConnect #}
        {% if server.paramOverride is defined and server.paramOverride.zookeeperConnect is defined %}
        zookeeperConnect: {{ server.paramOverride.zookeeperConnect }}
        {% else %}
        # zookeeperConnect:
        {% endif %}
      {# schemaRegistryUrl #}
        {% if server.paramOverride is defined and server.paramOverride.schemaRegistryUrl is defined %}
        schemaRegistryUrl: {{ server.paramOverride.schemaRegistryUrl }}
        {% else %}
        # schemaRegistryUrl:
        {% endif %}
      {# kafkaConnectUrl #}
        {% if server.paramOverride is defined and server.paramOverride.kafkaConnectUrl is defined %}
        kafkaConnectUrl: {{ server.paramOverride.kafkaConnectUrl }}
        {% else %}
        # kafkaConnectUrl:
        {% endif %}
      {# kafkaRestUrl #}
        {% if server.paramOverride is defined and server.paramOverride.kafkaRestUrl is defined %}
        kafkaRestUrl: {{ server.paramOverride.kafkaRestUrl }}
        {% else %}
        # kafkaRestUrl:
        {% endif %}
      {# ksqlDbUrl #}
        {% if server.paramOverride is defined and server.paramOverride.ksqlDbUrl is defined %}
        ksqlDbUrl: {{ server.paramOverride.ksqlDbUrl }}
        {% else %}
        # ksqlDbUrl:
        {% endif %}
    {% include 'file-template.yaml.j2' %}

    {% endfor %}
{% endif %}
