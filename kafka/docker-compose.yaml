version: "3.8"

services:
  kafka1:
    restart: unless-stopped
    image: bitnami/kafka:latest
    hostname: kafka1
    networks:
      - stream-network
    ports:
      - 9092
    environment:
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper1:2181
      - ALLOW_PLAINTEXT_LISTENER=yes
    volumes:
      - /mnt/volume/kafka/kafka1:/bitnami/kafka

  kafka2:
    restart: unless-stopped
    image: bitnami/kafka:latest
    hostname: kafka2
    networks:
      - stream-network
    ports:
      - 9092
    environment:
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper2:2181
      - ALLOW_PLAINTEXT_LISTENER=yes
    volumes:
      - /mnt/volume/kafka/kafka2:/bitnami/kafka

  kafka3:
    restart: unless-stopped
    image: bitnami/kafka:latest
    hostname: kafka3
    networks:
      - stream-network
    ports:
      - 9092
    environment:
      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper3:2181
      - ALLOW_PLAINTEXT_LISTENER=yes
    volumes:
      - /mnt/volume/kafka/kafka3:/bitnami/kafka

networks:
  stream-network:
    external:
      name: stream-network
